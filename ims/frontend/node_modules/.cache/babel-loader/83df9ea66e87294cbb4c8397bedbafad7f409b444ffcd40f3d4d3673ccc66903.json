{"ast":null,"code":"var _jsxFileName = \"E:\\\\szakdolgozat\\\\ims\\\\frontend\\\\src\\\\Seller.jsx\",\n  _s = $RefreshSig$();\nimport React, { useState, useEffect, useContext } from \"react\";\nimport { AuthContext } from \"./AuthProvider.jsx\";\nimport { Form, Button, Container, Row, Col, Table, Alert, Modal, Card } from \"react-bootstrap\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nfunction Seller() {\n  _s();\n  const {\n    token,\n    user\n  } = useContext(AuthContext);\n  const [products, setProducts] = useState([]);\n  const [cart, setCart] = useState([]);\n  const [selectedProduct, setSelectedProduct] = useState(null);\n  const [quantity, setQuantity] = useState(1);\n  const [paymentMethod, setPaymentMethod] = useState(\"\");\n  const [error, setError] = useState(\"\");\n  const [success, setSuccess] = useState(\"\");\n  const [showCheckoutModal, setShowCheckoutModal] = useState(false);\n  const [showReceiptModal, setShowReceiptModal] = useState(false);\n  const [receiptData, setReceiptData] = useState(null);\n  useEffect(() => {\n    const fetchProducts = async () => {\n      try {\n        const response = await fetch(\"http://localhost:5000/api/products\", {\n          headers: {\n            Authorization: `Bearer ${token}`\n          }\n        });\n        const data = await response.json();\n        if (response.ok) {\n          setProducts(data);\n        } else {\n          setError(data.message);\n        }\n      } catch (err) {\n        setError(\"Error fetching products.\");\n      }\n    };\n    fetchProducts();\n  }, [token]);\n  const handleAddToCart = () => {\n    if (!selectedProduct || quantity <= 0) {\n      setError(\"Please select a product and enter a valid quantity.\");\n      return;\n    }\n    if (quantity > selectedProduct.stock) {\n      setError(\"Cannot add more than available stock.\");\n      return;\n    }\n    const existingItem = cart.find(item => item.id === selectedProduct.id);\n    if (existingItem) {\n      setCart(cart.map(item => item.id === selectedProduct.id ? {\n        ...item,\n        quantity: item.quantity + quantity\n      } : item));\n    } else {\n      setCart([...cart, {\n        ...selectedProduct,\n        quantity\n      }]);\n    }\n    setError(\"\");\n    setSelectedProduct(null);\n    setQuantity(1);\n  };\n  const handleRemoveFromCart = productId => {\n    setCart(cart.filter(item => item.id !== productId));\n  };\n  const handleCheckout = async () => {\n    if (cart.length === 0 || !paymentMethod) {\n      setError(\"Cart is empty or payment method is not selected.\");\n      return;\n    }\n    setShowCheckoutModal(true);\n  };\n  const confirmCheckout = async () => {\n    try {\n      const response = await fetch(\"http://localhost:5000/api/receipts\", {\n        method: \"POST\",\n        headers: {\n          \"Content-Type\": \"application/json\",\n          Authorization: `Bearer ${token}`\n        },\n        body: JSON.stringify({\n          items: cart.map(({\n            id,\n            quantity\n          }) => ({\n            id,\n            quantity\n          })),\n          payment_method: paymentMethod\n        })\n      });\n      const data = await response.json();\n      if (response.ok) {\n        setReceiptData({\n          transactionId: data.id,\n          cashierId: user.id,\n          date: new Date().toLocaleString(),\n          items: cart,\n          total: cart.reduce((sum, item) => sum + item.price * item.quantity, 0),\n          paymentMethod: paymentMethod.charAt(0).toUpperCase() + paymentMethod.slice(1)\n        });\n        setCart([]);\n        setPaymentMethod(\"\");\n        setShowCheckoutModal(false);\n        setShowReceiptModal(true);\n      } else {\n        setError(data.message);\n      }\n    } catch (err) {\n      setError(\"Error completing transaction.\");\n    }\n  };\n  return /*#__PURE__*/_jsxDEV(Container, {\n    className: \"mt-5\",\n    children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n      className: \"text-center mb-4\",\n      children: \"Sales Terminal\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 114,\n      columnNumber: 7\n    }, this), error && /*#__PURE__*/_jsxDEV(Alert, {\n      variant: \"danger\",\n      children: error\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 115,\n      columnNumber: 17\n    }, this), success && /*#__PURE__*/_jsxDEV(Alert, {\n      variant: \"success\",\n      children: success\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 116,\n      columnNumber: 19\n    }, this), /*#__PURE__*/_jsxDEV(Row, {\n      children: [/*#__PURE__*/_jsxDEV(Col, {\n        md: 6,\n        children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n          children: \"Add Items\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 121,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(Form.Group, {\n          className: \"mb-3\",\n          children: [/*#__PURE__*/_jsxDEV(Form.Label, {\n            children: \"Select Product\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 123,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(Form.Control, {\n            as: \"select\",\n            value: (selectedProduct === null || selectedProduct === void 0 ? void 0 : selectedProduct.id) || \"\",\n            onChange: e => {\n              const product = products.find(p => p.id === parseInt(e.target.value, 10));\n              if ((product === null || product === void 0 ? void 0 : product.stock) === 0) {\n                setError(\"This item is out of stock.\");\n                setSelectedProduct(null);\n              } else {\n                setError(\"\");\n                setSelectedProduct(product);\n              }\n            },\n            children: [/*#__PURE__*/_jsxDEV(\"option\", {\n              value: \"\",\n              children: \"Select a product\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 138,\n              columnNumber: 15\n            }, this), products.map(product => /*#__PURE__*/_jsxDEV(\"option\", {\n              value: product.id,\n              disabled: product.stock === 0,\n              children: [product.displayname, \" ($\", product.price, \") - Stock: \", product.stock]\n            }, product.id, true, {\n              fileName: _jsxFileName,\n              lineNumber: 140,\n              columnNumber: 17\n            }, this))]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 124,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 122,\n          columnNumber: 11\n        }, this), (selectedProduct === null || selectedProduct === void 0 ? void 0 : selectedProduct.price) === 0 && /*#__PURE__*/_jsxDEV(Alert, {\n          variant: \"warning\",\n          children: \"This item's price is set to free.\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 151,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(Form.Group, {\n          className: \"mb-3\",\n          children: [/*#__PURE__*/_jsxDEV(Form.Label, {\n            children: \"Quantity\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 154,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(Form.Control, {\n            type: \"number\",\n            min: \"1\",\n            max: (selectedProduct === null || selectedProduct === void 0 ? void 0 : selectedProduct.stock) || 1,\n            value: quantity,\n            onChange: e => setQuantity(parseInt(e.target.value, 10) || 1)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 155,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 153,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(Button, {\n          variant: \"primary\",\n          onClick: handleAddToCart,\n          children: \"Add to Cart\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 163,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 120,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Col, {\n        md: 6,\n        children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n          children: \"Cart\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 170,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(Table, {\n          striped: true,\n          bordered: true,\n          hover: true,\n          children: [/*#__PURE__*/_jsxDEV(\"thead\", {\n            children: /*#__PURE__*/_jsxDEV(\"tr\", {\n              children: [/*#__PURE__*/_jsxDEV(\"th\", {\n                children: \"Name\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 174,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                children: \"Quantity\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 175,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                children: \"Price/pcs\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 176,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                children: \"Total\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 177,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                children: \"Action\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 178,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 173,\n              columnNumber: 15\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 172,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"tbody\", {\n            children: cart.map(item => /*#__PURE__*/_jsxDEV(\"tr\", {\n              children: [/*#__PURE__*/_jsxDEV(\"td\", {\n                children: item.displayname\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 184,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                children: item.quantity\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 185,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                children: [\"$\", item.price]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 186,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                children: [\"$\", item.price * item.quantity]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 187,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                children: /*#__PURE__*/_jsxDEV(Button, {\n                  variant: \"danger\",\n                  size: \"sm\",\n                  onClick: () => handleRemoveFromCart(item.id),\n                  children: \"Remove\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 189,\n                  columnNumber: 21\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 188,\n                columnNumber: 19\n              }, this)]\n            }, item.id, true, {\n              fileName: _jsxFileName,\n              lineNumber: 183,\n              columnNumber: 17\n            }, this))\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 181,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 171,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"hr\", {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 201,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"h5\", {\n          children: [\"Total: $\", cart.reduce((sum, item) => sum + item.price * item.quantity, 0)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 202,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(Form.Group, {\n          className: \"mb-3\",\n          children: [/*#__PURE__*/_jsxDEV(Form.Label, {\n            children: \"Payment Method\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 204,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(Form.Control, {\n            as: \"select\",\n            value: paymentMethod,\n            onChange: e => setPaymentMethod(e.target.value),\n            children: [/*#__PURE__*/_jsxDEV(\"option\", {\n              value: \"\",\n              children: \"Select Payment Method\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 210,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n              value: \"cash\",\n              children: \"Cash\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 211,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n              value: \"card\",\n              children: \"Card\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 212,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 205,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 203,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"d-flex justify-content-between\",\n          children: [/*#__PURE__*/_jsxDEV(Button, {\n            variant: \"danger\",\n            onClick: () => setCart([]),\n            children: \"Cancel\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 216,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(Button, {\n            variant: \"success\",\n            onClick: handleCheckout,\n            children: \"Checkout\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 219,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 215,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 169,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 118,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(Modal, {\n      show: showCheckoutModal,\n      onHide: () => setShowCheckoutModal(false),\n      centered: true,\n      children: [/*#__PURE__*/_jsxDEV(Modal.Header, {\n        closeButton: true,\n        children: /*#__PURE__*/_jsxDEV(Modal.Title, {\n          children: \"Confirm Checkout\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 229,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 228,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Modal.Body, {\n        children: \"Has the buyer paid for the items?\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 231,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Modal.Footer, {\n        children: [/*#__PURE__*/_jsxDEV(Button, {\n          variant: \"secondary\",\n          onClick: () => setShowCheckoutModal(false),\n          children: \"No\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 233,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(Button, {\n          variant: \"success\",\n          onClick: confirmCheckout,\n          children: \"Yes\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 236,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 232,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 227,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(Modal, {\n      show: showReceiptModal,\n      onHide: () => setShowReceiptModal(false),\n      centered: true,\n      children: [/*#__PURE__*/_jsxDEV(Modal.Header, {\n        closeButton: true,\n        children: /*#__PURE__*/_jsxDEV(Modal.Title, {\n          children: \"Receipt\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 245,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 244,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Modal.Body, {\n        children: receiptData && /*#__PURE__*/_jsxDEV(Card, {\n          children: /*#__PURE__*/_jsxDEV(Card.Body, {\n            children: [/*#__PURE__*/_jsxDEV(\"h5\", {\n              children: \"Receipt\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 251,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n              children: [\"Transaction ID: \", receiptData.transactionId]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 252,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n              children: [\"Cashier ID: \", receiptData.cashierId]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 253,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n              children: [\"Date: \", receiptData.date]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 254,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(Table, {\n              striped: true,\n              bordered: true,\n              children: [/*#__PURE__*/_jsxDEV(\"thead\", {\n                children: /*#__PURE__*/_jsxDEV(\"tr\", {\n                  children: [/*#__PURE__*/_jsxDEV(\"th\", {\n                    children: \"Item\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 258,\n                    columnNumber: 23\n                  }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                    children: \"Quantity\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 259,\n                    columnNumber: 23\n                  }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                    children: \"Price\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 260,\n                    columnNumber: 23\n                  }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                    children: \"Total\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 261,\n                    columnNumber: 23\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 257,\n                  columnNumber: 21\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 256,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"tbody\", {\n                children: receiptData.items.map(item => /*#__PURE__*/_jsxDEV(\"tr\", {\n                  children: [/*#__PURE__*/_jsxDEV(\"td\", {\n                    children: item.displayname\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 267,\n                    columnNumber: 25\n                  }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                    children: item.quantity\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 268,\n                    columnNumber: 25\n                  }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                    children: [\"$\", item.price]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 269,\n                    columnNumber: 25\n                  }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                    children: [\"$\", item.price * item.quantity]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 270,\n                    columnNumber: 25\n                  }, this)]\n                }, item.id, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 266,\n                  columnNumber: 23\n                }, this))\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 264,\n                columnNumber: 19\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 255,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"h5\", {\n              children: [\"Total: $\", receiptData.total]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 275,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n              children: [\"Payment Method: \", receiptData.paymentMethod]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 276,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 250,\n            columnNumber: 15\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 249,\n          columnNumber: 13\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 247,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Modal.Footer, {\n        children: /*#__PURE__*/_jsxDEV(Button, {\n          variant: \"primary\",\n          onClick: () => setShowReceiptModal(false),\n          children: \"Close\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 282,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 281,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 243,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 113,\n    columnNumber: 5\n  }, this);\n}\n_s(Seller, \"Fi2mr1zUeYY8jNDelfiPLANduu8=\");\n_c = Seller;\nexport default Seller;\nvar _c;\n$RefreshReg$(_c, \"Seller\");","map":{"version":3,"names":["React","useState","useEffect","useContext","AuthContext","Form","Button","Container","Row","Col","Table","Alert","Modal","Card","jsxDEV","_jsxDEV","Seller","_s","token","user","products","setProducts","cart","setCart","selectedProduct","setSelectedProduct","quantity","setQuantity","paymentMethod","setPaymentMethod","error","setError","success","setSuccess","showCheckoutModal","setShowCheckoutModal","showReceiptModal","setShowReceiptModal","receiptData","setReceiptData","fetchProducts","response","fetch","headers","Authorization","data","json","ok","message","err","handleAddToCart","stock","existingItem","find","item","id","map","handleRemoveFromCart","productId","filter","handleCheckout","length","confirmCheckout","method","body","JSON","stringify","items","payment_method","transactionId","cashierId","date","Date","toLocaleString","total","reduce","sum","price","charAt","toUpperCase","slice","className","children","fileName","_jsxFileName","lineNumber","columnNumber","variant","md","Group","Label","Control","as","value","onChange","e","product","p","parseInt","target","disabled","displayname","type","min","max","onClick","striped","bordered","hover","size","show","onHide","centered","Header","closeButton","Title","Body","Footer","_c","$RefreshReg$"],"sources":["E:/szakdolgozat/ims/frontend/src/Seller.jsx"],"sourcesContent":["import React, { useState, useEffect, useContext } from \"react\";\r\nimport { AuthContext } from \"./AuthProvider.jsx\";\r\nimport { Form, Button, Container, Row, Col, Table, Alert, Modal, Card } from \"react-bootstrap\";\r\n\r\nfunction Seller() {\r\n  const { token, user } = useContext(AuthContext);\r\n  const [products, setProducts] = useState([]);\r\n  const [cart, setCart] = useState([]);\r\n  const [selectedProduct, setSelectedProduct] = useState(null);\r\n  const [quantity, setQuantity] = useState(1);\r\n  const [paymentMethod, setPaymentMethod] = useState(\"\");\r\n  const [error, setError] = useState(\"\");\r\n  const [success, setSuccess] = useState(\"\");\r\n  const [showCheckoutModal, setShowCheckoutModal] = useState(false);\r\n  const [showReceiptModal, setShowReceiptModal] = useState(false);\r\n  const [receiptData, setReceiptData] = useState(null);\r\n\r\n  useEffect(() => {\r\n    const fetchProducts = async () => {\r\n      try {\r\n        const response = await fetch(\"http://localhost:5000/api/products\", {\r\n          headers: {\r\n            Authorization: `Bearer ${token}`,\r\n          },\r\n        });\r\n        const data = await response.json();\r\n        if (response.ok) {\r\n          setProducts(data);\r\n        } else {\r\n          setError(data.message);\r\n        }\r\n      } catch (err) {\r\n        setError(\"Error fetching products.\");\r\n      }\r\n    };\r\n    fetchProducts();\r\n  }, [token]);\r\n\r\n  const handleAddToCart = () => {\r\n    if (!selectedProduct || quantity <= 0) {\r\n      setError(\"Please select a product and enter a valid quantity.\");\r\n      return;\r\n    }\r\n    if (quantity > selectedProduct.stock) {\r\n      setError(\"Cannot add more than available stock.\");\r\n      return;\r\n    }\r\n    const existingItem = cart.find((item) => item.id === selectedProduct.id);\r\n    if (existingItem) {\r\n      setCart(\r\n        cart.map((item) =>\r\n          item.id === selectedProduct.id\r\n            ? { ...item, quantity: item.quantity + quantity }\r\n            : item\r\n        )\r\n      );\r\n    } else {\r\n      setCart([...cart, { ...selectedProduct, quantity }]);\r\n    }\r\n    setError(\"\");\r\n    setSelectedProduct(null);\r\n    setQuantity(1);\r\n  };\r\n\r\n  const handleRemoveFromCart = (productId) => {\r\n    setCart(cart.filter((item) => item.id !== productId));\r\n  };\r\n\r\n  const handleCheckout = async () => {\r\n    if (cart.length === 0 || !paymentMethod) {\r\n      setError(\"Cart is empty or payment method is not selected.\");\r\n      return;\r\n    }\r\n    setShowCheckoutModal(true);\r\n  };\r\n\r\n  const confirmCheckout = async () => {\r\n    try {\r\n      const response = await fetch(\"http://localhost:5000/api/receipts\", {\r\n        method: \"POST\",\r\n        headers: {\r\n          \"Content-Type\": \"application/json\",\r\n          Authorization: `Bearer ${token}`,\r\n        },\r\n        body: JSON.stringify({\r\n          items: cart.map(({ id, quantity }) => ({ id, quantity })),\r\n          payment_method: paymentMethod,\r\n        }),\r\n      });\r\n      const data = await response.json();\r\n      if (response.ok) {\r\n        setReceiptData({\r\n          transactionId: data.id,\r\n          cashierId: user.id,\r\n          date: new Date().toLocaleString(),\r\n          items: cart,\r\n          total: cart.reduce((sum, item) => sum + item.price * item.quantity, 0),\r\n          paymentMethod: paymentMethod.charAt(0).toUpperCase() + paymentMethod.slice(1),\r\n        });\r\n        setCart([]);\r\n        setPaymentMethod(\"\");\r\n        setShowCheckoutModal(false);\r\n        setShowReceiptModal(true);\r\n      } else {\r\n        setError(data.message);\r\n      }\r\n    } catch (err) {\r\n      setError(\"Error completing transaction.\");\r\n    }\r\n  };\r\n\r\n  return (\r\n    <Container className=\"mt-5\">\r\n      <h1 className=\"text-center mb-4\">Sales Terminal</h1>\r\n      {error && <Alert variant=\"danger\">{error}</Alert>}\r\n      {success && <Alert variant=\"success\">{success}</Alert>}\r\n\r\n      <Row>\r\n        {/* Left Side: Add Items */}\r\n        <Col md={6}>\r\n          <h3>Add Items</h3>\r\n          <Form.Group className=\"mb-3\">\r\n            <Form.Label>Select Product</Form.Label>\r\n            <Form.Control\r\n              as=\"select\"\r\n              value={selectedProduct?.id || \"\"}\r\n              onChange={(e) => {\r\n                const product = products.find((p) => p.id === parseInt(e.target.value, 10));\r\n                if (product?.stock === 0) {\r\n                  setError(\"This item is out of stock.\");\r\n                  setSelectedProduct(null);\r\n                } else {\r\n                  setError(\"\");\r\n                  setSelectedProduct(product);\r\n                }\r\n              }}\r\n            >\r\n              <option value=\"\">Select a product</option>\r\n              {products.map((product) => (\r\n                <option\r\n                  key={product.id}\r\n                  value={product.id}\r\n                  disabled={product.stock === 0}\r\n                >\r\n                  {product.displayname} (${product.price}) - Stock: {product.stock}\r\n                </option>\r\n              ))}\r\n            </Form.Control>\r\n          </Form.Group>\r\n          {selectedProduct?.price === 0 && (\r\n            <Alert variant=\"warning\">This item's price is set to free.</Alert>\r\n          )}\r\n          <Form.Group className=\"mb-3\">\r\n            <Form.Label>Quantity</Form.Label>\r\n            <Form.Control\r\n              type=\"number\"\r\n              min=\"1\"\r\n              max={selectedProduct?.stock || 1}\r\n              value={quantity}\r\n              onChange={(e) => setQuantity(parseInt(e.target.value, 10) || 1)}\r\n            />\r\n          </Form.Group>\r\n          <Button variant=\"primary\" onClick={handleAddToCart}>\r\n            Add to Cart\r\n          </Button>\r\n        </Col>\r\n\r\n        {/* Right Side: Cart */}\r\n        <Col md={6}>\r\n          <h3>Cart</h3>\r\n          <Table striped bordered hover>\r\n            <thead>\r\n              <tr>\r\n                <th>Name</th>\r\n                <th>Quantity</th>\r\n                <th>Price/pcs</th>\r\n                <th>Total</th>\r\n                <th>Action</th>\r\n              </tr>\r\n            </thead>\r\n            <tbody>\r\n              {cart.map((item) => (\r\n                <tr key={item.id}>\r\n                  <td>{item.displayname}</td>\r\n                  <td>{item.quantity}</td>\r\n                  <td>${item.price}</td>\r\n                  <td>${item.price * item.quantity}</td>\r\n                  <td>\r\n                    <Button\r\n                      variant=\"danger\"\r\n                      size=\"sm\"\r\n                      onClick={() => handleRemoveFromCart(item.id)}\r\n                    >\r\n                      Remove\r\n                    </Button>\r\n                  </td>\r\n                </tr>\r\n              ))}\r\n            </tbody>\r\n          </Table>\r\n          <hr />\r\n          <h5>Total: ${cart.reduce((sum, item) => sum + item.price * item.quantity, 0)}</h5>\r\n          <Form.Group className=\"mb-3\">\r\n            <Form.Label>Payment Method</Form.Label>\r\n            <Form.Control\r\n              as=\"select\"\r\n              value={paymentMethod}\r\n              onChange={(e) => setPaymentMethod(e.target.value)}\r\n            >\r\n              <option value=\"\">Select Payment Method</option>\r\n              <option value=\"cash\">Cash</option>\r\n              <option value=\"card\">Card</option>\r\n            </Form.Control>\r\n          </Form.Group>\r\n          <div className=\"d-flex justify-content-between\">\r\n            <Button variant=\"danger\" onClick={() => setCart([])}>\r\n              Cancel\r\n            </Button>\r\n            <Button variant=\"success\" onClick={handleCheckout}>\r\n              Checkout\r\n            </Button>\r\n          </div>\r\n        </Col>\r\n      </Row>\r\n\r\n      {/* Checkout Confirmation Modal */}\r\n      <Modal show={showCheckoutModal} onHide={() => setShowCheckoutModal(false)} centered>\r\n        <Modal.Header closeButton>\r\n          <Modal.Title>Confirm Checkout</Modal.Title>\r\n        </Modal.Header>\r\n        <Modal.Body>Has the buyer paid for the items?</Modal.Body>\r\n        <Modal.Footer>\r\n          <Button variant=\"secondary\" onClick={() => setShowCheckoutModal(false)}>\r\n            No\r\n          </Button>\r\n          <Button variant=\"success\" onClick={confirmCheckout}>\r\n            Yes\r\n          </Button>\r\n        </Modal.Footer>\r\n      </Modal>\r\n\r\n      {/* Receipt Modal */}\r\n      <Modal show={showReceiptModal} onHide={() => setShowReceiptModal(false)} centered>\r\n        <Modal.Header closeButton>\r\n          <Modal.Title>Receipt</Modal.Title>\r\n        </Modal.Header>\r\n        <Modal.Body>\r\n          {receiptData && (\r\n            <Card>\r\n              <Card.Body>\r\n                <h5>Receipt</h5>\r\n                <p>Transaction ID: {receiptData.transactionId}</p>\r\n                <p>Cashier ID: {receiptData.cashierId}</p>\r\n                <p>Date: {receiptData.date}</p>\r\n                <Table striped bordered>\r\n                  <thead>\r\n                    <tr>\r\n                      <th>Item</th>\r\n                      <th>Quantity</th>\r\n                      <th>Price</th>\r\n                      <th>Total</th>\r\n                    </tr>\r\n                  </thead>\r\n                  <tbody>\r\n                    {receiptData.items.map((item) => (\r\n                      <tr key={item.id}>\r\n                        <td>{item.displayname}</td>\r\n                        <td>{item.quantity}</td>\r\n                        <td>${item.price}</td>\r\n                        <td>${item.price * item.quantity}</td>\r\n                      </tr>\r\n                    ))}\r\n                  </tbody>\r\n                </Table>\r\n                <h5>Total: ${receiptData.total}</h5>\r\n                <p>Payment Method: {receiptData.paymentMethod}</p>\r\n              </Card.Body>\r\n            </Card>\r\n          )}\r\n        </Modal.Body>\r\n        <Modal.Footer>\r\n          <Button variant=\"primary\" onClick={() => setShowReceiptModal(false)}>\r\n            Close\r\n          </Button>\r\n        </Modal.Footer>\r\n      </Modal>\r\n    </Container>\r\n  );\r\n}\r\n\r\nexport default Seller;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}