{"ast":null,"code":"var _jsxFileName = \"E:\\\\szakdolgozat\\\\ims\\\\frontend\\\\src\\\\UsersManager.jsx\",\n  _s = $RefreshSig$();\nimport React, { useState, useEffect, useContext } from \"react\";\nimport { AuthContext } from \"./AuthProvider.jsx\";\nimport { Form, Button, Container, Row, Col, Alert, Card, Modal } from \"react-bootstrap\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nfunction UsersManager() {\n  _s();\n  const {\n    token,\n    user: currentUser\n  } = useContext(AuthContext); // Extract currentUser from AuthContext\n  const [users, setUsers] = useState([]);\n  const [user, setUser] = useState({\n    id: 0,\n    username: \"\",\n    email: \"\",\n    phone_number: \"\",\n    given_name: \"\",\n    family_name: \"\",\n    dob: \"\",\n    address: \"\",\n    account_level: 0,\n    password: \"\",\n    currentPassword: \"\",\n    profile_picture: \"\"\n  });\n  const [error, setError] = useState(\"\");\n  const [success, setSuccess] = useState(\"\");\n  const [tempProfilePicture, setTempProfilePicture] = useState(\"\");\n  const defaultProfilePicture = \"https://upload.wikimedia.org/wikipedia/commons/a/ac/Default_pfp.jpg?20200418092106\";\n  const [showPicturePopup, setShowPicturePopup] = useState(false);\n  const [maxAccountLevel, setMaxAccountLevel] = useState(0); // Track max account_level from roles table\n\n  const fetchUsers = async () => {\n    try {\n      const response = await fetch(\"http://localhost:5000/api/users\", {\n        headers: {\n          Authorization: `Bearer ${token}`\n        }\n      });\n      const data = await response.json();\n      if (response.ok) {\n        setUsers(data.sort((a, b) => a.id - b.id)); // Sort users by ID\n      } else {\n        setError(data.message);\n      }\n    } catch (err) {\n      setError(\"Error fetching users.\");\n    }\n  };\n  useEffect(() => {\n    fetchUsers();\n  }, [token]);\n  useEffect(() => {\n    const fetchMaxAccountLevel = async () => {\n      try {\n        const response = await fetch(\"http://localhost:5000/api/roles/max\", {\n          headers: {\n            Authorization: `Bearer ${token}`\n          }\n        });\n        const data = await response.json();\n        if (response.ok) {\n          setMaxAccountLevel(data.maxLevel || 0);\n        }\n      } catch (err) {\n        setError(\"Error fetching max account level.\");\n      }\n    };\n    fetchMaxAccountLevel();\n  }, [token]);\n  const handleInputChange = e => {\n    const {\n      name,\n      value\n    } = e.target;\n    if (name === \"account_level\") {\n      const numericValue = Math.max(0, Math.min(maxAccountLevel, parseInt(value, 10) || 0)); // Restrict value\n      if (user.id === currentUser.id) {\n        setError(\"You cannot change your own account level.\");\n        return;\n      }\n      setUser({\n        ...user,\n        [name]: numericValue\n      });\n    } else {\n      setUser({\n        ...user,\n        [name]: value\n      });\n    }\n  };\n  const handleSelectUser = e => {\n    const selectedId = parseInt(e.target.value, 10);\n    const selectedUser = users.find(u => u.id === selectedId) || {\n      id: 0,\n      username: \"\",\n      email: \"\",\n      phone_number: \"\",\n      given_name: \"\",\n      family_name: \"\",\n      dob: \"\",\n      address: \"\",\n      account_level: 0,\n      password: \"\",\n      currentPassword: \"\",\n      profile_picture: defaultProfilePicture // Ensure default profile picture\n    };\n    setUser(selectedUser);\n    setError(\"\");\n    setSuccess(\"\");\n  };\n  const handleUpdateUser = async () => {\n    var _users$find;\n    if (!user.currentPassword) {\n      setError(\"Current password is required to update user details.\");\n      return;\n    }\n    const updatedUser = {\n      ...user\n    };\n\n    // Ensure DOB is in yyyy-mm-dd format and only update if it has changed\n    const existingDob = ((_users$find = users.find(u => u.id === user.id)) === null || _users$find === void 0 ? void 0 : _users$find.dob) || null;\n    const formattedDob = user.dob ? new Date(user.dob).toISOString().split(\"T\")[0] : null;\n    if (existingDob === formattedDob) {\n      delete updatedUser.dob; // Remove DOB from the update payload if unchanged\n    } else {\n      updatedUser.dob = formattedDob; // Ensure the DOB is in yyyy-mm-dd format\n    }\n    try {\n      const response = await fetch(`http://localhost:5000/api/users/${user.id}`, {\n        method: \"PUT\",\n        headers: {\n          \"Content-Type\": \"application/json\",\n          Authorization: `Bearer ${token}`\n        },\n        body: JSON.stringify(updatedUser)\n      });\n      const data = await response.json();\n      if (response.ok) {\n        setSuccess(\"User updated successfully!\");\n        fetchUsers();\n        setUser({\n          id: 0,\n          username: \"\",\n          email: \"\",\n          phone_number: \"\",\n          given_name: \"\",\n          family_name: \"\",\n          dob: \"\",\n          address: \"\",\n          account_level: 0,\n          password: \"\",\n          currentPassword: \"\",\n          profile_picture: defaultProfilePicture // Reset to default\n        });\n      } else {\n        setError(data.message);\n      }\n    } catch (err) {\n      setError(\"Error updating user.\");\n    }\n  };\n  const handleProfilePictureChange = () => {\n    const img = new Image();\n    img.src = tempProfilePicture;\n    img.onload = () => {\n      setUser({\n        ...user,\n        profile_picture: tempProfilePicture\n      });\n      setTempProfilePicture(\"\");\n      setShowPicturePopup(false);\n      setError(\"\");\n    };\n    img.onerror = () => {\n      setError(\"Invalid image URL.\");\n    };\n  };\n  const resetProfilePicture = () => {\n    setUser({\n      ...user,\n      profile_picture: defaultProfilePicture\n    });\n  };\n  const isDisabled = user.id === 0;\n  return /*#__PURE__*/_jsxDEV(Container, {\n    className: \"mt-5\",\n    children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n      className: \"text-center mb-4\",\n      children: \"Users Manager\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 182,\n      columnNumber: 7\n    }, this), error && /*#__PURE__*/_jsxDEV(Alert, {\n      variant: \"danger\",\n      children: error\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 183,\n      columnNumber: 17\n    }, this), success && /*#__PURE__*/_jsxDEV(Alert, {\n      variant: \"success\",\n      children: success\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 184,\n      columnNumber: 19\n    }, this), /*#__PURE__*/_jsxDEV(Form, {\n      children: [/*#__PURE__*/_jsxDEV(Row, {\n        className: \"mb-3\",\n        children: [/*#__PURE__*/_jsxDEV(Col, {\n          md: 4,\n          children: /*#__PURE__*/_jsxDEV(Form.Group, {\n            controlId: \"id\",\n            children: [/*#__PURE__*/_jsxDEV(Form.Label, {\n              children: \"User ID\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 190,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(Form.Control, {\n              as: \"select\",\n              name: \"id\",\n              value: user.id,\n              onChange: handleSelectUser,\n              children: [/*#__PURE__*/_jsxDEV(\"option\", {\n                value: 0,\n                children: \"Select User\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 197,\n                columnNumber: 17\n              }, this), users.map(u => /*#__PURE__*/_jsxDEV(\"option\", {\n                value: u.id,\n                children: [u.id, \" - \", u.username]\n              }, u.id, true, {\n                fileName: _jsxFileName,\n                lineNumber: 199,\n                columnNumber: 19\n              }, this))]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 191,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 189,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 188,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(Col, {\n          md: 8,\n          children: /*#__PURE__*/_jsxDEV(Form.Group, {\n            controlId: \"username\",\n            children: [/*#__PURE__*/_jsxDEV(Form.Label, {\n              children: \"Username\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 208,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(Form.Control, {\n              type: \"text\",\n              name: \"username\",\n              value: user.username,\n              onChange: handleInputChange,\n              disabled: isDisabled\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 209,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 207,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 206,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 187,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Row, {\n        className: \"mb-3\",\n        children: [/*#__PURE__*/_jsxDEV(Col, {\n          md: 6,\n          children: /*#__PURE__*/_jsxDEV(Form.Group, {\n            controlId: \"email\",\n            children: [/*#__PURE__*/_jsxDEV(Form.Label, {\n              children: \"Email\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 222,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(Form.Control, {\n              type: \"email\",\n              name: \"email\",\n              value: user.email,\n              onChange: handleInputChange,\n              disabled: isDisabled\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 223,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 221,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 220,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(Col, {\n          md: 6,\n          children: /*#__PURE__*/_jsxDEV(Form.Group, {\n            controlId: \"phone_number\",\n            children: [/*#__PURE__*/_jsxDEV(Form.Label, {\n              children: \"Phone Number\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 234,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(Form.Control, {\n              type: \"text\",\n              name: \"phone_number\",\n              value: user.phone_number,\n              onChange: handleInputChange,\n              disabled: isDisabled\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 235,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 233,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 232,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 219,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Row, {\n        className: \"mb-3\",\n        children: [/*#__PURE__*/_jsxDEV(Col, {\n          md: 6,\n          children: /*#__PURE__*/_jsxDEV(Form.Group, {\n            controlId: \"given_name\",\n            children: [/*#__PURE__*/_jsxDEV(Form.Label, {\n              children: \"Given Name\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 248,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(Form.Control, {\n              type: \"text\",\n              name: \"given_name\",\n              value: user.given_name,\n              onChange: handleInputChange,\n              disabled: isDisabled\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 249,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 247,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 246,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(Col, {\n          md: 6,\n          children: /*#__PURE__*/_jsxDEV(Form.Group, {\n            controlId: \"family_name\",\n            children: [/*#__PURE__*/_jsxDEV(Form.Label, {\n              children: \"Family Name\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 260,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(Form.Control, {\n              type: \"text\",\n              name: \"family_name\",\n              value: user.family_name,\n              onChange: handleInputChange,\n              disabled: isDisabled\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 261,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 259,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 258,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 245,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Row, {\n        className: \"mb-3\",\n        children: [/*#__PURE__*/_jsxDEV(Col, {\n          md: 6,\n          children: /*#__PURE__*/_jsxDEV(Form.Group, {\n            controlId: \"dob\",\n            children: [/*#__PURE__*/_jsxDEV(Form.Label, {\n              children: \"Date of Birth\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 274,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(Form.Control, {\n              type: \"date\",\n              name: \"dob\",\n              value: user.dob,\n              onChange: handleInputChange,\n              disabled: isDisabled\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 275,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 273,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 272,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(Col, {\n          md: 6,\n          children: /*#__PURE__*/_jsxDEV(Form.Group, {\n            controlId: \"address\",\n            children: [/*#__PURE__*/_jsxDEV(Form.Label, {\n              children: \"Address\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 286,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(Form.Control, {\n              type: \"text\",\n              name: \"address\",\n              value: user.address,\n              onChange: handleInputChange,\n              disabled: isDisabled\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 287,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 285,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 284,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 271,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Row, {\n        className: \"mb-3\",\n        children: /*#__PURE__*/_jsxDEV(Col, {\n          children: /*#__PURE__*/_jsxDEV(Form.Group, {\n            controlId: \"account_level\",\n            children: [/*#__PURE__*/_jsxDEV(Form.Label, {\n              children: \"Account Level\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 300,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(Form.Control, {\n              type: \"number\",\n              name: \"account_level\",\n              value: user.account_level,\n              onChange: handleInputChange,\n              min: \"0\",\n              max: maxAccountLevel // Keep the maxAccountLevel restriction\n              ,\n              disabled: isDisabled || user.id === currentUser.id // Check against current user's ID\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 301,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 299,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 298,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 297,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Row, {\n        className: \"mb-3\",\n        children: [/*#__PURE__*/_jsxDEV(Col, {\n          md: 6,\n          children: /*#__PURE__*/_jsxDEV(Form.Group, {\n            controlId: \"password\",\n            children: [/*#__PURE__*/_jsxDEV(Form.Label, {\n              children: \"New Password\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 316,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(Form.Control, {\n              type: \"password\",\n              name: \"password\",\n              value: user.password,\n              onChange: handleInputChange,\n              disabled: isDisabled\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 317,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 315,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 314,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(Col, {\n          md: 6,\n          children: /*#__PURE__*/_jsxDEV(Form.Group, {\n            controlId: \"currentPassword\",\n            children: [/*#__PURE__*/_jsxDEV(Form.Label, {\n              children: \"Admin's Password\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 328,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(Form.Control, {\n              type: \"password\",\n              name: \"currentPassword\",\n              value: user.currentPassword,\n              onChange: handleInputChange,\n              disabled: isDisabled\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 329,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 327,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 326,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 313,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Row, {\n        className: \"mb-3\",\n        children: /*#__PURE__*/_jsxDEV(Col, {\n          children: /*#__PURE__*/_jsxDEV(Form.Group, {\n            controlId: \"profile_picture\",\n            children: [/*#__PURE__*/_jsxDEV(Form.Label, {\n              children: \"Profile Picture\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 342,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"d-flex\",\n              children: [/*#__PURE__*/_jsxDEV(Form.Control, {\n                type: \"text\",\n                name: \"profile_picture\",\n                value: tempProfilePicture,\n                onChange: e => setTempProfilePicture(e.target.value),\n                disabled: isDisabled\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 344,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(Button, {\n                variant: \"primary\",\n                onClick: () => setShowPicturePopup(true),\n                className: \"ms-2\",\n                disabled: isDisabled,\n                children: \"Preview\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 351,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 343,\n              columnNumber: 15\n            }, this), user.profile_picture && /*#__PURE__*/_jsxDEV(Card, {\n              className: \"mt-3 position-relative\",\n              children: [/*#__PURE__*/_jsxDEV(Card.Img, {\n                variant: \"top\",\n                src: user.profile_picture,\n                alt: \"Profile\",\n                style: {\n                  width: \"150px\",\n                  height: \"150px\",\n                  objectFit: \"cover\",\n                  borderRadius: \"50%\",\n                  // Make it circular\n                  margin: \"0 auto\"\n                }\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 362,\n                columnNumber: 19\n              }, this), user.profile_picture !== defaultProfilePicture && /*#__PURE__*/_jsxDEV(Button, {\n                variant: \"danger\",\n                size: \"sm\",\n                className: \"position-absolute top-0 end-0 m-2\",\n                style: {\n                  borderRadius: \"50%\",\n                  width: \"24px\",\n                  height: \"24px\",\n                  padding: \"0\",\n                  lineHeight: \"1\"\n                },\n                onClick: resetProfilePicture,\n                children: \"X\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 375,\n                columnNumber: 21\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 361,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 341,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 340,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 339,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Button, {\n        variant: \"primary\",\n        className: \"w-100\",\n        onClick: handleUpdateUser,\n        disabled: isDisabled,\n        children: \"Update User\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 396,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 186,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(Modal, {\n      show: showPicturePopup,\n      onHide: () => setShowPicturePopup(false),\n      centered: true,\n      children: [/*#__PURE__*/_jsxDEV(Modal.Header, {\n        closeButton: true,\n        children: /*#__PURE__*/_jsxDEV(Modal.Title, {\n          children: \"Change Profile Picture\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 409,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 408,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Modal.Body, {\n        children: /*#__PURE__*/_jsxDEV(Card, {\n          className: \"text-center\",\n          children: [/*#__PURE__*/_jsxDEV(Card.Img, {\n            variant: \"top\",\n            src: user.profile_picture || defaultProfilePicture,\n            alt: \"Current Profile\",\n            style: {\n              width: \"150px\",\n              height: \"150px\",\n              objectFit: \"cover\",\n              borderRadius: \"50%\",\n              // Circular preview\n              margin: \"0 auto\"\n            }\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 413,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(Card.Body, {\n            children: [/*#__PURE__*/_jsxDEV(\"input\", {\n              type: \"text\",\n              className: \"form-control mb-3\",\n              placeholder: \"Paste image URL\",\n              value: tempProfilePicture,\n              onChange: e => setTempProfilePicture(e.target.value)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 426,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(Button, {\n              variant: \"primary\",\n              onClick: handleProfilePictureChange,\n              children: \"Check\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 433,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 425,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 412,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 411,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 407,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 181,\n    columnNumber: 5\n  }, this);\n}\n_s(UsersManager, \"ttCGy4YZCA3yzYqr1yZgojKW1sA=\");\n_c = UsersManager;\nexport default UsersManager;\nvar _c;\n$RefreshReg$(_c, \"UsersManager\");","map":{"version":3,"names":["React","useState","useEffect","useContext","AuthContext","Form","Button","Container","Row","Col","Alert","Card","Modal","jsxDEV","_jsxDEV","UsersManager","_s","token","user","currentUser","users","setUsers","setUser","id","username","email","phone_number","given_name","family_name","dob","address","account_level","password","currentPassword","profile_picture","error","setError","success","setSuccess","tempProfilePicture","setTempProfilePicture","defaultProfilePicture","showPicturePopup","setShowPicturePopup","maxAccountLevel","setMaxAccountLevel","fetchUsers","response","fetch","headers","Authorization","data","json","ok","sort","a","b","message","err","fetchMaxAccountLevel","maxLevel","handleInputChange","e","name","value","target","numericValue","Math","max","min","parseInt","handleSelectUser","selectedId","selectedUser","find","u","handleUpdateUser","_users$find","updatedUser","existingDob","formattedDob","Date","toISOString","split","method","body","JSON","stringify","handleProfilePictureChange","img","Image","src","onload","onerror","resetProfilePicture","isDisabled","className","children","fileName","_jsxFileName","lineNumber","columnNumber","variant","md","Group","controlId","Label","Control","as","onChange","map","type","disabled","onClick","Img","alt","style","width","height","objectFit","borderRadius","margin","size","padding","lineHeight","show","onHide","centered","Header","closeButton","Title","Body","placeholder","_c","$RefreshReg$"],"sources":["E:/szakdolgozat/ims/frontend/src/UsersManager.jsx"],"sourcesContent":["import React, { useState, useEffect, useContext } from \"react\";\r\nimport { AuthContext } from \"./AuthProvider.jsx\";\r\nimport { Form, Button, Container, Row, Col, Alert, Card, Modal } from \"react-bootstrap\";\r\n\r\nfunction UsersManager() {\r\n  const { token, user: currentUser } = useContext(AuthContext); // Extract currentUser from AuthContext\r\n  const [users, setUsers] = useState([]);\r\n  const [user, setUser] = useState({\r\n    id: 0,\r\n    username: \"\",\r\n    email: \"\",\r\n    phone_number: \"\",\r\n    given_name: \"\",\r\n    family_name: \"\",\r\n    dob: \"\",\r\n    address: \"\",\r\n    account_level: 0,\r\n    password: \"\",\r\n    currentPassword: \"\",\r\n    profile_picture: \"\",\r\n  });\r\n  const [error, setError] = useState(\"\");\r\n  const [success, setSuccess] = useState(\"\");\r\n  const [tempProfilePicture, setTempProfilePicture] = useState(\"\");\r\n  const defaultProfilePicture = \"https://upload.wikimedia.org/wikipedia/commons/a/ac/Default_pfp.jpg?20200418092106\";\r\n  const [showPicturePopup, setShowPicturePopup] = useState(false);\r\n  const [maxAccountLevel, setMaxAccountLevel] = useState(0); // Track max account_level from roles table\r\n\r\n  const fetchUsers = async () => {\r\n    try {\r\n      const response = await fetch(\"http://localhost:5000/api/users\", {\r\n        headers: {\r\n          Authorization: `Bearer ${token}`,\r\n        },\r\n      });\r\n      const data = await response.json();\r\n      if (response.ok) {\r\n        setUsers(data.sort((a, b) => a.id - b.id)); // Sort users by ID\r\n      } else {\r\n        setError(data.message);\r\n      }\r\n    } catch (err) {\r\n      setError(\"Error fetching users.\");\r\n    }\r\n  };\r\n\r\n  useEffect(() => {\r\n    fetchUsers();\r\n  }, [token]);\r\n\r\n  useEffect(() => {\r\n    const fetchMaxAccountLevel = async () => {\r\n      try {\r\n        const response = await fetch(\"http://localhost:5000/api/roles/max\", {\r\n          headers: {\r\n            Authorization: `Bearer ${token}`,\r\n          },\r\n        });\r\n        const data = await response.json();\r\n        if (response.ok) {\r\n          setMaxAccountLevel(data.maxLevel || 0);\r\n        }\r\n      } catch (err) {\r\n        setError(\"Error fetching max account level.\");\r\n      }\r\n    };\r\n\r\n    fetchMaxAccountLevel();\r\n  }, [token]);\r\n\r\n  const handleInputChange = (e) => {\r\n    const { name, value } = e.target;\r\n\r\n    if (name === \"account_level\") {\r\n      const numericValue = Math.max(0, Math.min(maxAccountLevel, parseInt(value, 10) || 0)); // Restrict value\r\n      if (user.id === currentUser.id) {\r\n        setError(\"You cannot change your own account level.\");\r\n        return;\r\n      }\r\n      setUser({ ...user, [name]: numericValue });\r\n    } else {\r\n      setUser({ ...user, [name]: value });\r\n    }\r\n  };\r\n\r\n  const handleSelectUser = (e) => {\r\n    const selectedId = parseInt(e.target.value, 10);\r\n    const selectedUser = users.find((u) => u.id === selectedId) || {\r\n      id: 0,\r\n      username: \"\",\r\n      email: \"\",\r\n      phone_number: \"\",\r\n      given_name: \"\",\r\n      family_name: \"\",\r\n      dob: \"\",\r\n      address: \"\",\r\n      account_level: 0,\r\n      password: \"\",\r\n      currentPassword: \"\",\r\n      profile_picture: defaultProfilePicture, // Ensure default profile picture\r\n    };\r\n    setUser(selectedUser);\r\n    setError(\"\");\r\n    setSuccess(\"\");\r\n  };\r\n\r\n  const handleUpdateUser = async () => {\r\n    if (!user.currentPassword) {\r\n      setError(\"Current password is required to update user details.\");\r\n      return;\r\n    }\r\n\r\n    const updatedUser = { ...user };\r\n\r\n    // Ensure DOB is in yyyy-mm-dd format and only update if it has changed\r\n    const existingDob = users.find((u) => u.id === user.id)?.dob || null;\r\n    const formattedDob = user.dob ? new Date(user.dob).toISOString().split(\"T\")[0] : null;\r\n\r\n    if (existingDob === formattedDob) {\r\n      delete updatedUser.dob; // Remove DOB from the update payload if unchanged\r\n    } else {\r\n      updatedUser.dob = formattedDob; // Ensure the DOB is in yyyy-mm-dd format\r\n    }\r\n\r\n    try {\r\n      const response = await fetch(`http://localhost:5000/api/users/${user.id}`, {\r\n        method: \"PUT\",\r\n        headers: {\r\n          \"Content-Type\": \"application/json\",\r\n          Authorization: `Bearer ${token}`,\r\n        },\r\n        body: JSON.stringify(updatedUser),\r\n      });\r\n      const data = await response.json();\r\n      if (response.ok) {\r\n        setSuccess(\"User updated successfully!\");\r\n        fetchUsers();\r\n        setUser({\r\n          id: 0,\r\n          username: \"\",\r\n          email: \"\",\r\n          phone_number: \"\",\r\n          given_name: \"\",\r\n          family_name: \"\",\r\n          dob: \"\",\r\n          address: \"\",\r\n          account_level: 0,\r\n          password: \"\",\r\n          currentPassword: \"\",\r\n          profile_picture: defaultProfilePicture, // Reset to default\r\n        });\r\n      } else {\r\n        setError(data.message);\r\n      }\r\n    } catch (err) {\r\n      setError(\"Error updating user.\");\r\n    }\r\n  };\r\n\r\n  const handleProfilePictureChange = () => {\r\n    const img = new Image();\r\n    img.src = tempProfilePicture;\r\n    img.onload = () => {\r\n      setUser({ ...user, profile_picture: tempProfilePicture });\r\n      setTempProfilePicture(\"\");\r\n      setShowPicturePopup(false);\r\n      setError(\"\");\r\n    };\r\n    img.onerror = () => {\r\n      setError(\"Invalid image URL.\");\r\n    };\r\n  };\r\n\r\n  const resetProfilePicture = () => {\r\n    setUser({ ...user, profile_picture: defaultProfilePicture });\r\n  };\r\n\r\n  const isDisabled = user.id === 0;\r\n\r\n  return (\r\n    <Container className=\"mt-5\">\r\n      <h1 className=\"text-center mb-4\">Users Manager</h1>\r\n      {error && <Alert variant=\"danger\">{error}</Alert>}\r\n      {success && <Alert variant=\"success\">{success}</Alert>}\r\n\r\n      <Form>\r\n        <Row className=\"mb-3\">\r\n          <Col md={4}>\r\n            <Form.Group controlId=\"id\">\r\n              <Form.Label>User ID</Form.Label>\r\n              <Form.Control\r\n                as=\"select\"\r\n                name=\"id\"\r\n                value={user.id}\r\n                onChange={handleSelectUser}\r\n              >\r\n                <option value={0}>Select User</option>\r\n                {users.map((u) => (\r\n                  <option key={u.id} value={u.id}>\r\n                    {u.id} - {u.username}\r\n                  </option>\r\n                ))}\r\n              </Form.Control>\r\n            </Form.Group>\r\n          </Col>\r\n          <Col md={8}>\r\n            <Form.Group controlId=\"username\">\r\n              <Form.Label>Username</Form.Label>\r\n              <Form.Control\r\n                type=\"text\"\r\n                name=\"username\"\r\n                value={user.username}\r\n                onChange={handleInputChange}\r\n                disabled={isDisabled}\r\n              />\r\n            </Form.Group>\r\n          </Col>\r\n        </Row>\r\n        <Row className=\"mb-3\">\r\n          <Col md={6}>\r\n            <Form.Group controlId=\"email\">\r\n              <Form.Label>Email</Form.Label>\r\n              <Form.Control\r\n                type=\"email\"\r\n                name=\"email\"\r\n                value={user.email}\r\n                onChange={handleInputChange}\r\n                disabled={isDisabled}\r\n              />\r\n            </Form.Group>\r\n          </Col>\r\n          <Col md={6}>\r\n            <Form.Group controlId=\"phone_number\">\r\n              <Form.Label>Phone Number</Form.Label>\r\n              <Form.Control\r\n                type=\"text\"\r\n                name=\"phone_number\"\r\n                value={user.phone_number}\r\n                onChange={handleInputChange}\r\n                disabled={isDisabled}\r\n              />\r\n            </Form.Group>\r\n          </Col>\r\n        </Row>\r\n        <Row className=\"mb-3\">\r\n          <Col md={6}>\r\n            <Form.Group controlId=\"given_name\">\r\n              <Form.Label>Given Name</Form.Label>\r\n              <Form.Control\r\n                type=\"text\"\r\n                name=\"given_name\"\r\n                value={user.given_name}\r\n                onChange={handleInputChange}\r\n                disabled={isDisabled}\r\n              />\r\n            </Form.Group>\r\n          </Col>\r\n          <Col md={6}>\r\n            <Form.Group controlId=\"family_name\">\r\n              <Form.Label>Family Name</Form.Label>\r\n              <Form.Control\r\n                type=\"text\"\r\n                name=\"family_name\"\r\n                value={user.family_name}\r\n                onChange={handleInputChange}\r\n                disabled={isDisabled}\r\n              />\r\n            </Form.Group>\r\n          </Col>\r\n        </Row>\r\n        <Row className=\"mb-3\">\r\n          <Col md={6}>\r\n            <Form.Group controlId=\"dob\">\r\n              <Form.Label>Date of Birth</Form.Label>\r\n              <Form.Control\r\n                type=\"date\"\r\n                name=\"dob\"\r\n                value={user.dob}\r\n                onChange={handleInputChange}\r\n                disabled={isDisabled}\r\n              />\r\n            </Form.Group>\r\n          </Col>\r\n          <Col md={6}>\r\n            <Form.Group controlId=\"address\">\r\n              <Form.Label>Address</Form.Label>\r\n              <Form.Control\r\n                type=\"text\"\r\n                name=\"address\"\r\n                value={user.address}\r\n                onChange={handleInputChange}\r\n                disabled={isDisabled}\r\n              />\r\n            </Form.Group>\r\n          </Col>\r\n        </Row>\r\n        <Row className=\"mb-3\">\r\n          <Col>\r\n            <Form.Group controlId=\"account_level\">\r\n              <Form.Label>Account Level</Form.Label>\r\n              <Form.Control\r\n                type=\"number\"\r\n                name=\"account_level\"\r\n                value={user.account_level}\r\n                onChange={handleInputChange}\r\n                min=\"0\"\r\n                max={maxAccountLevel} // Keep the maxAccountLevel restriction\r\n                disabled={isDisabled || user.id === currentUser.id} // Check against current user's ID\r\n              />\r\n            </Form.Group>\r\n          </Col>\r\n        </Row>\r\n        <Row className=\"mb-3\">\r\n          <Col md={6}>\r\n            <Form.Group controlId=\"password\">\r\n              <Form.Label>New Password</Form.Label>\r\n              <Form.Control\r\n                type=\"password\"\r\n                name=\"password\"\r\n                value={user.password}\r\n                onChange={handleInputChange}\r\n                disabled={isDisabled}\r\n              />\r\n            </Form.Group>\r\n          </Col>\r\n          <Col md={6}>\r\n            <Form.Group controlId=\"currentPassword\">\r\n              <Form.Label>Admin's Password</Form.Label>\r\n              <Form.Control\r\n                type=\"password\"\r\n                name=\"currentPassword\"\r\n                value={user.currentPassword}\r\n                onChange={handleInputChange}\r\n                disabled={isDisabled}\r\n              />\r\n            </Form.Group>\r\n          </Col>\r\n        </Row>\r\n        <Row className=\"mb-3\">\r\n          <Col>\r\n            <Form.Group controlId=\"profile_picture\">\r\n              <Form.Label>Profile Picture</Form.Label>\r\n              <div className=\"d-flex\">\r\n                <Form.Control\r\n                  type=\"text\"\r\n                  name=\"profile_picture\"\r\n                  value={tempProfilePicture}\r\n                  onChange={(e) => setTempProfilePicture(e.target.value)}\r\n                  disabled={isDisabled}\r\n                />\r\n                <Button\r\n                  variant=\"primary\"\r\n                  onClick={() => setShowPicturePopup(true)}\r\n                  className=\"ms-2\"\r\n                  disabled={isDisabled}\r\n                >\r\n                  Preview\r\n                </Button>\r\n              </div>\r\n              {user.profile_picture && (\r\n                <Card className=\"mt-3 position-relative\">\r\n                  <Card.Img\r\n                    variant=\"top\"\r\n                    src={user.profile_picture}\r\n                    alt=\"Profile\"\r\n                    style={{\r\n                      width: \"150px\",\r\n                      height: \"150px\",\r\n                      objectFit: \"cover\",\r\n                      borderRadius: \"50%\", // Make it circular\r\n                      margin: \"0 auto\",\r\n                    }}\r\n                  />\r\n                  {user.profile_picture !== defaultProfilePicture && (\r\n                    <Button\r\n                      variant=\"danger\"\r\n                      size=\"sm\"\r\n                      className=\"position-absolute top-0 end-0 m-2\"\r\n                      style={{\r\n                        borderRadius: \"50%\",\r\n                        width: \"24px\",\r\n                        height: \"24px\",\r\n                        padding: \"0\",\r\n                        lineHeight: \"1\",\r\n                      }}\r\n                      onClick={resetProfilePicture}\r\n                    >\r\n                      X\r\n                    </Button>\r\n                  )}\r\n                </Card>\r\n              )}\r\n            </Form.Group>\r\n          </Col>\r\n        </Row>\r\n        <Button\r\n          variant=\"primary\"\r\n          className=\"w-100\"\r\n          onClick={handleUpdateUser}\r\n          disabled={isDisabled}\r\n        >\r\n          Update User\r\n        </Button>\r\n      </Form>\r\n\r\n      {/* Profile Picture Popup */}\r\n      <Modal show={showPicturePopup} onHide={() => setShowPicturePopup(false)} centered>\r\n        <Modal.Header closeButton>\r\n          <Modal.Title>Change Profile Picture</Modal.Title>\r\n        </Modal.Header>\r\n        <Modal.Body>\r\n          <Card className=\"text-center\">\r\n            <Card.Img\r\n              variant=\"top\"\r\n              src={user.profile_picture || defaultProfilePicture}\r\n              alt=\"Current Profile\"\r\n              style={{\r\n                width: \"150px\",\r\n                height: \"150px\",\r\n                objectFit: \"cover\",\r\n                borderRadius: \"50%\", // Circular preview\r\n                margin: \"0 auto\",\r\n              }}\r\n            />\r\n            <Card.Body>\r\n              <input\r\n                type=\"text\"\r\n                className=\"form-control mb-3\"\r\n                placeholder=\"Paste image URL\"\r\n                value={tempProfilePicture}\r\n                onChange={(e) => setTempProfilePicture(e.target.value)}\r\n              />\r\n              <Button variant=\"primary\" onClick={handleProfilePictureChange}>\r\n                Check\r\n              </Button>\r\n            </Card.Body>\r\n          </Card>\r\n        </Modal.Body>\r\n      </Modal>\r\n    </Container>\r\n  );\r\n}\r\n\r\nexport default UsersManager;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}